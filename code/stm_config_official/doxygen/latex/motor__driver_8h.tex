\hypertarget{motor__driver_8h}{}\doxysection{motor\+\_\+driver.\+h File Reference}
\label{motor__driver_8h}\index{motor\_driver.h@{motor\_driver.h}}
{\ttfamily \#include \char`\"{}stdint.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}math.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}tim.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}unit\+\_\+config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}uart\+\_\+driver.\+h\char`\"{}}\newline
Include dependency graph for motor\+\_\+driver.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}}
\begin{DoxyCompactList}\small\item\em Contains static and state information relevant to the operation of a motor driver. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{motor__driver_8h_ae4575baabf96654d1f690b0ea8434cb6}{motor\+\_\+interface\+\_\+controller\+\_\+init}} (uint8\+\_\+t motor\+Select)
\begin{DoxyCompactList}\small\item\em Initialize the controller interface. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a5b1d4d3b3ecba339966022064064ecb9}{motor\+\_\+interface\+\_\+update\+\_\+power}} (uint8\+\_\+t motor\+Select)
\begin{DoxyCompactList}\small\item\em Update the power setting of the selected motor based on the relevant controller (P/\+I/D) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a77cd679b3156c51a405370a438b49c59}{motor\+\_\+interface\+\_\+update\+\_\+tot\+\_\+cnt}} (uint8\+\_\+t motor\+Select)
\begin{DoxyCompactList}\small\item\em Update the total number of registered encoder counts since init. \end{DoxyCompactList}\item 
int32\+\_\+t \mbox{\hyperlink{motor__driver_8h_a45d8ba87037bd9c8f3ba62963a61debc}{motor\+\_\+interface\+\_\+get\+\_\+setpoint}} (uint8\+\_\+t motor\+Select)
\begin{DoxyCompactList}\small\item\em Returns the setpoint of the selected motors. \end{DoxyCompactList}\item 
int32\+\_\+t \mbox{\hyperlink{motor__driver_8h_afa28f0facea995579a77ce677905695c}{motor\+\_\+interface\+\_\+get\+\_\+total\+\_\+count}} (uint8\+\_\+t motor\+Select)
\begin{DoxyCompactList}\small\item\em Returns the number of total registered encoder counts since init. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{motor__driver_8h_a7641728383c5a148f3030c4de55e1088}{motor\+\_\+interface\+\_\+get\+\_\+encoder\+\_\+count}} (uint8\+\_\+t motor\+Select)
\begin{DoxyCompactList}\small\item\em Returns the current encoder hardware count. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{motor__driver_8h_ac719e44dbe8ab6a64b2a6a8e1de0563d}{motor\+\_\+interface\+\_\+get\+\_\+id}} (uint8\+\_\+t motor\+Select)
\item 
int32\+\_\+t \mbox{\hyperlink{motor__driver_8h_a8d5da907efc8ba0e46c4694a57e09496}{motor\+\_\+interface\+\_\+get\+\_\+resolution}} (uint8\+\_\+t motor\+Select)
\item 
uint8\+\_\+t \mbox{\hyperlink{motor__driver_8h_a12e1e0211a4a96e5cce8355055f32fdd}{motor\+\_\+interface\+\_\+get\+\_\+moving}} (uint8\+\_\+t motor\+Select)
\item 
void \mbox{\hyperlink{motor__driver_8h_a49c83d34eed12a9d7d816336bf7b366c}{motor\+\_\+interface\+\_\+set\+\_\+power}} (uint8\+\_\+t motor\+Select, uint8\+\_\+t direction, double power)
\begin{DoxyCompactList}\small\item\em Lets the user set the motor power setting directly. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_aace3017869f3ffb75bd17d9f6a1a3486}{motor\+\_\+interface\+\_\+set\+\_\+setpoint}} (uint8\+\_\+t motor\+Select, int32\+\_\+t setpoint)
\begin{DoxyCompactList}\small\item\em Lets the user set the motor setpoint directly. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a0a624e06462ac98241a76ad2059e5a9a}{motor\+\_\+interface\+\_\+delta\+\_\+setpoint}} (uint8\+\_\+t motor\+Select, int32\+\_\+t delta)
\begin{DoxyCompactList}\small\item\em Lets the user increment or decrement the motor encoder setpoint. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a2bcd64e73f7bb5c36a26b424687bcd95}{motor\+\_\+driver\+\_\+init}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\begin{DoxyCompactList}\small\item\em Initialise motor controller descriptor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a83ed61d06d2782b75a8249f5938c66dc}{motor\+\_\+driver\+\_\+update\+\_\+power}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\begin{DoxyCompactList}\small\item\em Sets the power of the selected motor based on a controller heuristic. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a8cc35cc6b29cb67f7401844a95c92296}{motor\+\_\+driver\+\_\+update\+\_\+tot\+\_\+cnt}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\begin{DoxyCompactList}\small\item\em Updates the encoder total count based on the relevant heuristic. \end{DoxyCompactList}\item 
int32\+\_\+t \mbox{\hyperlink{motor__driver_8h_a2cc4251e23348af1f1b0f8686182727a}{motor\+\_\+driver\+\_\+get\+\_\+setpoint}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\begin{DoxyCompactList}\small\item\em Gets the total encoder count setpoint of the selected motor. \end{DoxyCompactList}\item 
int32\+\_\+t \mbox{\hyperlink{motor__driver_8h_a90393e4934087e5ecb5d117e69e1632a}{motor\+\_\+driver\+\_\+get\+\_\+total\+\_\+cnt}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\begin{DoxyCompactList}\small\item\em Gets the total encoder count since init. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{motor__driver_8h_ac331d8d3eb86f71c9c25acfdb41000fc}{motor\+\_\+driver\+\_\+get\+\_\+encoder\+\_\+cnt}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\begin{DoxyCompactList}\small\item\em Gets the current hardware encoder count. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{motor__driver_8h_a634e5e129708311f70f61d2409010386}{motor\+\_\+driver\+\_\+get\+\_\+id}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\item 
int32\+\_\+t \mbox{\hyperlink{motor__driver_8h_a70d05882f94be7e7362030bc5fd7991d}{motor\+\_\+driver\+\_\+get\+\_\+resolution}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\item 
uint8\+\_\+t \mbox{\hyperlink{motor__driver_8h_a649a8002f34da4025e264d29ae146732}{motor\+\_\+driver\+\_\+get\+\_\+moving}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\item 
void \mbox{\hyperlink{motor__driver_8h_a9aa9510dd82d4295ce9afba8ad049749}{motor\+\_\+driver\+\_\+set\+\_\+power}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor, uint8\+\_\+t direction, double power)
\begin{DoxyCompactList}\small\item\em Set the power of a motor, limited by the motor\textquotesingle{}s safety cap. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a0869066133a22d3d7edefca8f872a0b4}{motor\+\_\+driver\+\_\+set\+\_\+setpoint}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor, int32\+\_\+t setpoint)
\begin{DoxyCompactList}\small\item\em Sets the total encoder count setpoint of the selected motor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_ae1f1f9d963f7d000fc17e29083a26b0f}{motor\+\_\+driver\+\_\+delta\+\_\+setpoint}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor, int32\+\_\+t delta)
\begin{DoxyCompactList}\small\item\em Changes the encoder setpoint of the relevant motor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a580effc29f984c82703d14eaf78fc1d3}{motor\+\_\+driver\+\_\+set\+\_\+pwm\+\_\+dc}} (uint32\+\_\+t $\ast$timer\+Counter, double pct)
\begin{DoxyCompactList}\small\item\em Sets the duty cycle of the selected PWM timer as a percentage of max. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_ab55cf754b1cf9b029afdcd62e9b5c94d}{motor\+\_\+driver\+\_\+calc\+\_\+safe\+\_\+vlt}} (\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$motor)
\begin{DoxyCompactList}\small\item\em Calculates the safe power percentage limit based on the descriptor struct. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a66a3e1854025653cef800263e289ea8b}{motor\+\_\+driver\+\_\+go\+\_\+forward}} (double pct, TIM\+\_\+\+Type\+Def $\ast$mtr, int8\+\_\+t polarity)
\begin{DoxyCompactList}\small\item\em Forward is the direction of increasing encoder count. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor__driver_8h_a657c1ba842bc4445cd460bb30034ad4e}{motor\+\_\+driver\+\_\+go\+\_\+backward}} (double pct, TIM\+\_\+\+Type\+Def $\ast$mtr, int8\+\_\+t polarity)
\begin{DoxyCompactList}\small\item\em Backward is the direction of decreasing encoder count. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{motor__driver_8h_ab55cf754b1cf9b029afdcd62e9b5c94d}\label{motor__driver_8h_ab55cf754b1cf9b029afdcd62e9b5c94d}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_calc\_safe\_vlt@{motor\_driver\_calc\_safe\_vlt}}
\index{motor\_driver\_calc\_safe\_vlt@{motor\_driver\_calc\_safe\_vlt}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_calc\_safe\_vlt()}{motor\_driver\_calc\_safe\_vlt()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+calc\+\_\+safe\+\_\+vlt (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}



Calculates the safe power percentage limit based on the descriptor struct. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_ae1f1f9d963f7d000fc17e29083a26b0f}\label{motor__driver_8h_ae1f1f9d963f7d000fc17e29083a26b0f}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_delta\_setpoint@{motor\_driver\_delta\_setpoint}}
\index{motor\_driver\_delta\_setpoint@{motor\_driver\_delta\_setpoint}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_delta\_setpoint()}{motor\_driver\_delta\_setpoint()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+delta\+\_\+setpoint (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor,  }\item[{int32\+\_\+t}]{delta }\end{DoxyParamCaption})}



Changes the encoder setpoint of the relevant motor. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
{\em delta} & Change to encoder count setpoint \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_ac331d8d3eb86f71c9c25acfdb41000fc}\label{motor__driver_8h_ac331d8d3eb86f71c9c25acfdb41000fc}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_get\_encoder\_cnt@{motor\_driver\_get\_encoder\_cnt}}
\index{motor\_driver\_get\_encoder\_cnt@{motor\_driver\_get\_encoder\_cnt}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_get\_encoder\_cnt()}{motor\_driver\_get\_encoder\_cnt()}}
{\footnotesize\ttfamily uint16\+\_\+t motor\+\_\+driver\+\_\+get\+\_\+encoder\+\_\+cnt (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}



Gets the current hardware encoder count. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TIMx-\/$>$CNT 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a634e5e129708311f70f61d2409010386}\label{motor__driver_8h_a634e5e129708311f70f61d2409010386}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_get\_id@{motor\_driver\_get\_id}}
\index{motor\_driver\_get\_id@{motor\_driver\_get\_id}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_get\_id()}{motor\_driver\_get\_id()}}
{\footnotesize\ttfamily uint8\+\_\+t motor\+\_\+driver\+\_\+get\+\_\+id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a649a8002f34da4025e264d29ae146732}\label{motor__driver_8h_a649a8002f34da4025e264d29ae146732}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_get\_moving@{motor\_driver\_get\_moving}}
\index{motor\_driver\_get\_moving@{motor\_driver\_get\_moving}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_get\_moving()}{motor\_driver\_get\_moving()}}
{\footnotesize\ttfamily uint8\+\_\+t motor\+\_\+driver\+\_\+get\+\_\+moving (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em motor} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a70d05882f94be7e7362030bc5fd7991d}\label{motor__driver_8h_a70d05882f94be7e7362030bc5fd7991d}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_get\_resolution@{motor\_driver\_get\_resolution}}
\index{motor\_driver\_get\_resolution@{motor\_driver\_get\_resolution}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_get\_resolution()}{motor\_driver\_get\_resolution()}}
{\footnotesize\ttfamily int32\+\_\+t motor\+\_\+driver\+\_\+get\+\_\+resolution (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em motor} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a2cc4251e23348af1f1b0f8686182727a}\label{motor__driver_8h_a2cc4251e23348af1f1b0f8686182727a}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_get\_setpoint@{motor\_driver\_get\_setpoint}}
\index{motor\_driver\_get\_setpoint@{motor\_driver\_get\_setpoint}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_get\_setpoint()}{motor\_driver\_get\_setpoint()}}
{\footnotesize\ttfamily int32\+\_\+t motor\+\_\+driver\+\_\+get\+\_\+setpoint (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}



Gets the total encoder count setpoint of the selected motor. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
encoder\+Total\+Setpoint 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a90393e4934087e5ecb5d117e69e1632a}\label{motor__driver_8h_a90393e4934087e5ecb5d117e69e1632a}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_get\_total\_cnt@{motor\_driver\_get\_total\_cnt}}
\index{motor\_driver\_get\_total\_cnt@{motor\_driver\_get\_total\_cnt}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_get\_total\_cnt()}{motor\_driver\_get\_total\_cnt()}}
{\footnotesize\ttfamily int32\+\_\+t motor\+\_\+driver\+\_\+get\+\_\+total\+\_\+cnt (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}



Gets the total encoder count since init. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
encoder\+Total\+Count 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a657c1ba842bc4445cd460bb30034ad4e}\label{motor__driver_8h_a657c1ba842bc4445cd460bb30034ad4e}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_go\_backward@{motor\_driver\_go\_backward}}
\index{motor\_driver\_go\_backward@{motor\_driver\_go\_backward}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_go\_backward()}{motor\_driver\_go\_backward()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+go\+\_\+backward (\begin{DoxyParamCaption}\item[{double}]{pct,  }\item[{TIM\+\_\+\+Type\+Def $\ast$}]{mtr,  }\item[{int8\+\_\+t}]{polarity }\end{DoxyParamCaption})}



Backward is the direction of decreasing encoder count. 


\begin{DoxyParams}{Parameters}
{\em pct} & Percentage of input voltage \\
\hline
{\em mtr} & Pointer to timer \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a66a3e1854025653cef800263e289ea8b}\label{motor__driver_8h_a66a3e1854025653cef800263e289ea8b}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_go\_forward@{motor\_driver\_go\_forward}}
\index{motor\_driver\_go\_forward@{motor\_driver\_go\_forward}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_go\_forward()}{motor\_driver\_go\_forward()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+go\+\_\+forward (\begin{DoxyParamCaption}\item[{double}]{pct,  }\item[{TIM\+\_\+\+Type\+Def $\ast$}]{mtr,  }\item[{int8\+\_\+t}]{polarity }\end{DoxyParamCaption})}



Forward is the direction of increasing encoder count. 


\begin{DoxyParams}{Parameters}
{\em pct} & Percentage of input voltage \\
\hline
{\em mtr} & Pointer to timer \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a2bcd64e73f7bb5c36a26b424687bcd95}\label{motor__driver_8h_a2bcd64e73f7bb5c36a26b424687bcd95}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_init@{motor\_driver\_init}}
\index{motor\_driver\_init@{motor\_driver\_init}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_init()}{motor\_driver\_init()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}



Initialise motor controller descriptor. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a9aa9510dd82d4295ce9afba8ad049749}\label{motor__driver_8h_a9aa9510dd82d4295ce9afba8ad049749}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_set\_power@{motor\_driver\_set\_power}}
\index{motor\_driver\_set\_power@{motor\_driver\_set\_power}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_set\_power()}{motor\_driver\_set\_power()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+set\+\_\+power (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor,  }\item[{uint8\+\_\+t}]{direction,  }\item[{double}]{power }\end{DoxyParamCaption})}



Set the power of a motor, limited by the motor\textquotesingle{}s safety cap. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
{\em direction} & 0 or 1 for forwards or backwards, respectively \\
\hline
{\em power} & percentage of input voltage \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a580effc29f984c82703d14eaf78fc1d3}\label{motor__driver_8h_a580effc29f984c82703d14eaf78fc1d3}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_set\_pwm\_dc@{motor\_driver\_set\_pwm\_dc}}
\index{motor\_driver\_set\_pwm\_dc@{motor\_driver\_set\_pwm\_dc}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_set\_pwm\_dc()}{motor\_driver\_set\_pwm\_dc()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+set\+\_\+pwm\+\_\+dc (\begin{DoxyParamCaption}\item[{uint32\+\_\+t $\ast$}]{timer\+Counter,  }\item[{double}]{pct }\end{DoxyParamCaption})}



Sets the duty cycle of the selected PWM timer as a percentage of max. 


\begin{DoxyParams}{Parameters}
{\em timer\+Counter} & Pointer to the relevant TIMx-\/$>$CNT register \\
\hline
{\em pct} & Percentage of maximum duty cycle \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a0869066133a22d3d7edefca8f872a0b4}\label{motor__driver_8h_a0869066133a22d3d7edefca8f872a0b4}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_set\_setpoint@{motor\_driver\_set\_setpoint}}
\index{motor\_driver\_set\_setpoint@{motor\_driver\_set\_setpoint}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_set\_setpoint()}{motor\_driver\_set\_setpoint()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+set\+\_\+setpoint (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor,  }\item[{int32\+\_\+t}]{setpoint }\end{DoxyParamCaption})}



Sets the total encoder count setpoint of the selected motor. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
{\em setpoint} & Total encoder count \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a83ed61d06d2782b75a8249f5938c66dc}\label{motor__driver_8h_a83ed61d06d2782b75a8249f5938c66dc}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_update\_power@{motor\_driver\_update\_power}}
\index{motor\_driver\_update\_power@{motor\_driver\_update\_power}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_update\_power()}{motor\_driver\_update\_power()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+update\+\_\+power (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}



Sets the power of the selected motor based on a controller heuristic. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a8cc35cc6b29cb67f7401844a95c92296}\label{motor__driver_8h_a8cc35cc6b29cb67f7401844a95c92296}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_driver\_update\_tot\_cnt@{motor\_driver\_update\_tot\_cnt}}
\index{motor\_driver\_update\_tot\_cnt@{motor\_driver\_update\_tot\_cnt}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_driver\_update\_tot\_cnt()}{motor\_driver\_update\_tot\_cnt()}}
{\footnotesize\ttfamily void motor\+\_\+driver\+\_\+update\+\_\+tot\+\_\+cnt (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__control__descriptor}{motor\+\_\+control\+\_\+descriptor}} $\ast$}]{motor }\end{DoxyParamCaption})}



Updates the encoder total count based on the relevant heuristic. 


\begin{DoxyParams}{Parameters}
{\em motor} & Pointer to the relevant motor struct, motor0 or motor1 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_ae4575baabf96654d1f690b0ea8434cb6}\label{motor__driver_8h_ae4575baabf96654d1f690b0ea8434cb6}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_controller\_init@{motor\_interface\_controller\_init}}
\index{motor\_interface\_controller\_init@{motor\_interface\_controller\_init}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_controller\_init()}{motor\_interface\_controller\_init()}}
{\footnotesize\ttfamily void motor\+\_\+interface\+\_\+controller\+\_\+init (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}



Initialize the controller interface. 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a0a624e06462ac98241a76ad2059e5a9a}\label{motor__driver_8h_a0a624e06462ac98241a76ad2059e5a9a}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_delta\_setpoint@{motor\_interface\_delta\_setpoint}}
\index{motor\_interface\_delta\_setpoint@{motor\_interface\_delta\_setpoint}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_delta\_setpoint()}{motor\_interface\_delta\_setpoint()}}
{\footnotesize\ttfamily void motor\+\_\+interface\+\_\+delta\+\_\+setpoint (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select,  }\item[{int32\+\_\+t}]{delta }\end{DoxyParamCaption})}



Lets the user increment or decrement the motor encoder setpoint. 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
{\em delta} & int32\+\_\+t, number of encoder clicks by which the setpoint is changed \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a7641728383c5a148f3030c4de55e1088}\label{motor__driver_8h_a7641728383c5a148f3030c4de55e1088}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_get\_encoder\_count@{motor\_interface\_get\_encoder\_count}}
\index{motor\_interface\_get\_encoder\_count@{motor\_interface\_get\_encoder\_count}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_get\_encoder\_count()}{motor\_interface\_get\_encoder\_count()}}
{\footnotesize\ttfamily uint16\+\_\+t motor\+\_\+interface\+\_\+get\+\_\+encoder\+\_\+count (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}



Returns the current encoder hardware count. 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TIMx-\/$>$CNT 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_ac719e44dbe8ab6a64b2a6a8e1de0563d}\label{motor__driver_8h_ac719e44dbe8ab6a64b2a6a8e1de0563d}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_get\_id@{motor\_interface\_get\_id}}
\index{motor\_interface\_get\_id@{motor\_interface\_get\_id}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_get\_id()}{motor\_interface\_get\_id()}}
{\footnotesize\ttfamily uint8\+\_\+t motor\+\_\+interface\+\_\+get\+\_\+id (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a12e1e0211a4a96e5cce8355055f32fdd}\label{motor__driver_8h_a12e1e0211a4a96e5cce8355055f32fdd}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_get\_moving@{motor\_interface\_get\_moving}}
\index{motor\_interface\_get\_moving@{motor\_interface\_get\_moving}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_get\_moving()}{motor\_interface\_get\_moving()}}
{\footnotesize\ttfamily uint8\+\_\+t motor\+\_\+interface\+\_\+get\+\_\+moving (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}

\mbox{\Hypertarget{motor__driver_8h_a8d5da907efc8ba0e46c4694a57e09496}\label{motor__driver_8h_a8d5da907efc8ba0e46c4694a57e09496}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_get\_resolution@{motor\_interface\_get\_resolution}}
\index{motor\_interface\_get\_resolution@{motor\_interface\_get\_resolution}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_get\_resolution()}{motor\_interface\_get\_resolution()}}
{\footnotesize\ttfamily int32\+\_\+t motor\+\_\+interface\+\_\+get\+\_\+resolution (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a45d8ba87037bd9c8f3ba62963a61debc}\label{motor__driver_8h_a45d8ba87037bd9c8f3ba62963a61debc}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_get\_setpoint@{motor\_interface\_get\_setpoint}}
\index{motor\_interface\_get\_setpoint@{motor\_interface\_get\_setpoint}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_get\_setpoint()}{motor\_interface\_get\_setpoint()}}
{\footnotesize\ttfamily int32\+\_\+t motor\+\_\+interface\+\_\+get\+\_\+setpoint (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}



Returns the setpoint of the selected motors. 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
encoder\+Total\+Setpoint ~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_afa28f0facea995579a77ce677905695c}\label{motor__driver_8h_afa28f0facea995579a77ce677905695c}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_get\_total\_count@{motor\_interface\_get\_total\_count}}
\index{motor\_interface\_get\_total\_count@{motor\_interface\_get\_total\_count}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_get\_total\_count()}{motor\_interface\_get\_total\_count()}}
{\footnotesize\ttfamily int32\+\_\+t motor\+\_\+interface\+\_\+get\+\_\+total\+\_\+count (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}



Returns the number of total registered encoder counts since init. 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
encoder\+Total\+Count ~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{motor__driver_8h_a49c83d34eed12a9d7d816336bf7b366c}\label{motor__driver_8h_a49c83d34eed12a9d7d816336bf7b366c}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_set\_power@{motor\_interface\_set\_power}}
\index{motor\_interface\_set\_power@{motor\_interface\_set\_power}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_set\_power()}{motor\_interface\_set\_power()}}
{\footnotesize\ttfamily void motor\+\_\+interface\+\_\+set\+\_\+power (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select,  }\item[{uint8\+\_\+t}]{direction,  }\item[{double}]{power }\end{DoxyParamCaption})}



Lets the user set the motor power setting directly. 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
{\em direction} & 0 or 1 for forwards or backwards, respectively \\
\hline
{\em power} & percentage of input voltage \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_aace3017869f3ffb75bd17d9f6a1a3486}\label{motor__driver_8h_aace3017869f3ffb75bd17d9f6a1a3486}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_set\_setpoint@{motor\_interface\_set\_setpoint}}
\index{motor\_interface\_set\_setpoint@{motor\_interface\_set\_setpoint}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_set\_setpoint()}{motor\_interface\_set\_setpoint()}}
{\footnotesize\ttfamily void motor\+\_\+interface\+\_\+set\+\_\+setpoint (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select,  }\item[{int32\+\_\+t}]{setpoint }\end{DoxyParamCaption})}



Lets the user set the motor setpoint directly. 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
{\em setpoint} & int32\+\_\+t \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a5b1d4d3b3ecba339966022064064ecb9}\label{motor__driver_8h_a5b1d4d3b3ecba339966022064064ecb9}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_update\_power@{motor\_interface\_update\_power}}
\index{motor\_interface\_update\_power@{motor\_interface\_update\_power}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_update\_power()}{motor\_interface\_update\_power()}}
{\footnotesize\ttfamily void motor\+\_\+interface\+\_\+update\+\_\+power (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}



Update the power setting of the selected motor based on the relevant controller (P/\+I/D) 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{motor__driver_8h_a77cd679b3156c51a405370a438b49c59}\label{motor__driver_8h_a77cd679b3156c51a405370a438b49c59}} 
\index{motor\_driver.h@{motor\_driver.h}!motor\_interface\_update\_tot\_cnt@{motor\_interface\_update\_tot\_cnt}}
\index{motor\_interface\_update\_tot\_cnt@{motor\_interface\_update\_tot\_cnt}!motor\_driver.h@{motor\_driver.h}}
\doxysubsubsection{\texorpdfstring{motor\_interface\_update\_tot\_cnt()}{motor\_interface\_update\_tot\_cnt()}}
{\footnotesize\ttfamily void motor\+\_\+interface\+\_\+update\+\_\+tot\+\_\+cnt (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{motor\+Select }\end{DoxyParamCaption})}



Update the total number of registered encoder counts since init. 


\begin{DoxyParams}{Parameters}
{\em motor\+Select} & 0 or 1 for motor0 or motor1 respectively \\
\hline
\end{DoxyParams}
